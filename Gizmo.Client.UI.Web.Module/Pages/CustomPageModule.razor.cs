using Gizmo.UI;
using Gizmo.Web.Api.Models;
using Gizmo.Web.Components;
using Microsoft.AspNetCore.Components;

namespace Gizmo.Client.UI.Web.Module.Pages
{
    [ModuleGuid("4D93FFBF-9431-4A4B-9312-04033867509E")]
    [PageUIModule(Title = "Web", Description = "Web page")]
    [ModuleDisplayOrder(int.MaxValue)]
    [Route("/web")]
    [ModuleIcon("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI2LjE4NzUgMjcuOTY4OEwyMi41IDI0LjI4MTJWMjcuMDYyNUgyMFYyMEgyNy4wNjI1VjIyLjVIMjQuMjVMMjcuOTM3NSAyNi4xODc1TDI2LjE4NzUgMjcuOTY4OFpNMTUgMjcuNUMxMy4yNzA4IDI3LjUgMTEuNjQ1OCAyNy4xNzE5IDEwLjEyNSAyNi41MTU2QzguNjA0MTcgMjUuODU5NCA3LjI4MTI1IDI0Ljk2ODggNi4xNTYyNSAyMy44NDM4QzUuMDMxMjUgMjIuNzE4OCA0LjE0MDYyIDIxLjM5NTggMy40ODQzOCAxOS44NzVDMi44MjgxMiAxOC4zNTQyIDIuNSAxNi43MjkyIDIuNSAxNUMyLjUgMTMuMjcwOCAyLjgyODEyIDExLjY0NTggMy40ODQzOCAxMC4xMjVDNC4xNDA2MiA4LjYwNDE3IDUuMDMxMjUgNy4yODEyNSA2LjE1NjI1IDYuMTU2MjVDNy4yODEyNSA1LjAzMTI1IDguNjA0MTcgNC4xNDA2MiAxMC4xMjUgMy40ODQzOEMxMS42NDU4IDIuODI4MTIgMTMuMjcwOCAyLjUgMTUgMi41QzE2LjcyOTIgMi41IDE4LjM1NDIgMi44MjgxMiAxOS44NzUgMy40ODQzOEMyMS4zOTU4IDQuMTQwNjIgMjIuNzE4OCA1LjAzMTI1IDIzLjg0MzggNi4xNTYyNUMyNC45Njg4IDcuMjgxMjUgMjUuODU5NCA4LjYwNDE3IDI2LjUxNTYgMTAuMTI1QzI3LjE3MTkgMTEuNjQ1OCAyNy41IDEzLjI3MDggMjcuNSAxNUMyNy41IDE1LjQxNjcgMjcuNDc5MiAxNS44MzMzIDI3LjQzNzUgMTYuMjVDMjcuMzk1OCAxNi42NjY3IDI3LjMzMzMgMTcuMDgzMyAyNy4yNSAxNy41SDI0LjY4NzVDMjQuNzkxNyAxNy4wODMzIDI0Ljg2OTggMTYuNjY2NyAyNC45MjE5IDE2LjI1QzI0Ljk3NCAxNS44MzMzIDI1IDE1LjQxNjcgMjUgMTVDMjUgMTQuNTgzMyAyNC45NzQgMTQuMTY2NyAyNC45MjE5IDEzLjc1QzI0Ljg2OTggMTMuMzMzMyAyNC43OTE3IDEyLjkxNjcgMjQuNjg3NSAxMi41SDIwLjQzNzVDMjAuNSAxMi45MTY3IDIwLjU0NjkgMTMuMzMzMyAyMC41NzgxIDEzLjc1QzIwLjYwOTQgMTQuMTY2NyAyMC42MjUgMTQuNTgzMyAyMC42MjUgMTVDMjAuNjI1IDE1LjQxNjcgMjAuNjA5NCAxNS44MzMzIDIwLjU3ODEgMTYuMjVDMjAuNTQ2OSAxNi42NjY3IDIwLjUgMTcuMDgzMyAyMC40Mzc1IDE3LjVIMTcuOTM3NUMxOCAxNy4wODMzIDE4LjA0NjkgMTYuNjY2NyAxOC4wNzgxIDE2LjI1QzE4LjEwOTQgMTUuODMzMyAxOC4xMjUgMTUuNDE2NyAxOC4xMjUgMTVDMTguMTI1IDE0LjU4MzMgMTguMTA5NCAxNC4xNjY3IDE4LjA3ODEgMTMuNzVDMTguMDQ2OSAxMy4zMzMzIDE4IDEyLjkxNjcgMTcuOTM3NSAxMi41SDEyLjA2MjVDMTIgMTIuOTE2NyAxMS45NTMxIDEzLjMzMzMgMTEuOTIxOSAxMy43NUMxMS44OTA2IDE0LjE2NjcgMTEuODc1IDE0LjU4MzMgMTEuODc1IDE1QzExLjg3NSAxNS40MTY3IDExLjg5MDYgMTUuODMzMyAxMS45MjE5IDE2LjI1QzExLjk1MzEgMTYuNjY2NyAxMiAxNy4wODMzIDEyLjA2MjUgMTcuNUgxNi4yNVYyMEgxMi42MjVDMTIuODc1IDIwLjg5NTggMTMuMTk3OSAyMS43NTUyIDEzLjU5MzggMjIuNTc4MUMxMy45ODk2IDIzLjQwMSAxNC40NTgzIDI0LjE4NzUgMTUgMjQuOTM3NUMxNS40MTY3IDI0LjkzNzUgMTUuODMzMyAyNC45MTE1IDE2LjI1IDI0Ljg1OTRDMTYuNjY2NyAyNC44MDczIDE3LjA4MzMgMjQuNzYwNCAxNy41IDI0LjcxODhWMjcuMjgxMkMxNy4wODMzIDI3LjMyMjkgMTYuNjY2NyAyNy4zNjk4IDE2LjI1IDI3LjQyMTlDMTUuODMzMyAyNy40NzQgMTUuNDE2NyAyNy41IDE1IDI3LjVaTTUuMzEyNSAxNy41SDkuNTYyNUM5LjUgMTcuMDgzMyA5LjQ1MzEyIDE2LjY2NjcgOS40MjE4OCAxNi4yNUM5LjM5MDYyIDE1LjgzMzMgOS4zNzUgMTUuNDE2NyA5LjM3NSAxNUM5LjM3NSAxNC41ODMzIDkuMzkwNjIgMTQuMTY2NyA5LjQyMTg4IDEzLjc1QzkuNDUzMTIgMTMuMzMzMyA5LjUgMTIuOTE2NyA5LjU2MjUgMTIuNUg1LjMxMjVDNS4yMDgzMyAxMi45MTY3IDUuMTMwMjEgMTMuMzMzMyA1LjA3ODEyIDEzLjc1QzUuMDI2MDQgMTQuMTY2NyA1IDE0LjU4MzMgNSAxNUM1IDE1LjQxNjcgNS4wMjYwNCAxNS44MzMzIDUuMDc4MTIgMTYuMjVDNS4xMzAyMSAxNi42NjY3IDUuMjA4MzMgMTcuMDgzMyA1LjMxMjUgMTcuNVpNNi4zNzUgMTBIMTAuMDYyNUMxMC4yNSA5LjIyOTE3IDEwLjQ4NDQgOC40NzM5NiAxMC43NjU2IDcuNzM0MzhDMTEuMDQ2OSA2Ljk5NDc5IDExLjM3NSA2LjI3MDgzIDExLjc1IDUuNTYyNUMxMC42MDQyIDUuOTM3NSA5LjU3MjkyIDYuNTA1MjEgOC42NTYyNSA3LjI2NTYyQzcuNzM5NTggOC4wMjYwNCA2Ljk3OTE3IDguOTM3NSA2LjM3NSAxMFpNMTEuNzUgMjQuNDM3NUMxMS4zNzUgMjMuNzI5MiAxMS4wNDY5IDIzLjAwNTIgMTAuNzY1NiAyMi4yNjU2QzEwLjQ4NDQgMjEuNTI2IDEwLjI1IDIwLjc3MDggMTAuMDYyNSAyMEg2LjM3NUM2Ljk3OTE3IDIxLjA2MjUgNy43Mzk1OCAyMS45NzQgOC42NTYyNSAyMi43MzQ0QzkuNTcyOTIgMjMuNDk0OCAxMC42MDQyIDI0LjA2MjUgMTEuNzUgMjQuNDM3NVpNMTIuNjI1IDEwSDE3LjM3NUMxNy4xMjUgOS4xMDQxNyAxNi44MDIxIDguMjQ0NzkgMTYuNDA2MiA3LjQyMTg4QzE2LjAxMDQgNi41OTg5NiAxNS41NDE3IDUuODEyNSAxNSA1LjA2MjVDMTQuNDU4MyA1LjgxMjUgMTMuOTg5NiA2LjU5ODk2IDEzLjU5MzggNy40MjE4OEMxMy4xOTc5IDguMjQ0NzkgMTIuODc1IDkuMTA0MTcgMTIuNjI1IDEwWk0xOS45Mzc1IDEwSDIzLjYyNUMyMy4wMjA4IDguOTM3NSAyMi4yNjA0IDguMDI2MDQgMjEuMzQzOCA3LjI2NTYyQzIwLjQyNzEgNi41MDUyMSAxOS4zOTU4IDUuOTM3NSAxOC4yNSA1LjU2MjVDMTguNjI1IDYuMjcwODMgMTguOTUzMSA2Ljk5NDc5IDE5LjIzNDQgNy43MzQzOEMxOS41MTU2IDguNDczOTYgMTkuNzUgOS4yMjkxNyAxOS45Mzc1IDEwWiIgZmlsbD0iI0ZBRkFGQSIvPgo8L3N2Zz4K")]
    public partial class CustomPageModule : CustomDOMComponentBase
    {
        [Inject] 
        private IGizmoClient GizmoClient { get; set; } = null!;
        
        [CascadingParameter]
        public Action<bool> SetBackgroundVisible { get; set; } = null!;
        
        private CustomPageModel? Page { get; set; }

        protected override async Task OnParametersSetAsync()
        {
            var pages = await GizmoClient.CustomPagesGetAsync();
            
            Page = pages.FirstOrDefault(p => string.Equals("4D93FFBF-9431-4A4B-9312-04033867509E", p.ModuleId.ToString(), StringComparison.OrdinalIgnoreCase));
            if (Page is null) throw new Exception("Web page content not found");
            
            await base.OnInitializedAsync();
        }
    }
}
